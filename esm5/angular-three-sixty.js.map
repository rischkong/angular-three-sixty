{"version":3,"file":"angular-three-sixty.js","sources":["../../build/src/three-sixty.factory.ts","../../build/src/three-sixty.component.ts","../../build/src/three-sixty.module.ts","../../build/public_api.ts"],"sourcesContent":["import ThreeSixty from '@mediaman/three-sixty';\nimport { ConfigurationInterface } from '@mediaman/three-sixty/dist/interfaces/configuration.interface';\n\nexport class ThreeSixtyFactory {\n\n    /**\n     * @param canvasElement\n     * @param configuration\n     */\n    public create(canvasElement: HTMLCanvasElement, configuration: ConfigurationInterface): ThreeSixty {\n        return new ThreeSixty(canvasElement, configuration);\n    }\n}\n","import {\n    Component,\n    ElementRef,\n    ViewChild,\n    Input,\n    OnInit,\n    Output,\n    EventEmitter,\n    ViewEncapsulation,\n    OnChanges,\n    SimpleChanges\n} from '@angular/core';\nimport { ThreeSixtyFactory } from './three-sixty.factory';\nimport { HotspotInterface } from '@mediaman/three-sixty/dist/interfaces/hotspot.interface';\nimport { ConfigurationInterface } from '@mediaman/three-sixty/dist/interfaces/configuration.interface';\nimport { ImageSetInterface } from '@mediaman/three-sixty/dist/interfaces/image-set.interface';\nimport ThreeSixty from '@mediaman/three-sixty';\n\n@Component({\n    selector: 'mm-three-sixty',\n    styles: ['.three-sixty-container{position:relative;cursor:move;cursor:-webkit-grab;-ms-touch-action:none;touch-action:none}.three-sixty__hotspot{display:none;position:absolute;width:200px;padding:10px 15px;background:rgba(0,0,0,.5);border-radius:20px;color:#fff}.three-sixty__hotspot--active{display:block}'],\n    template: `<canvas #canvasElement class=\"mm-three-sixty\" [width]=\"width\" [height]=\"height\"></canvas>`,\n    encapsulation: ViewEncapsulation.None\n})\nexport class ThreeSixtyComponent implements OnInit, OnChanges {\n\n    /**\n     * The canvas width\n     */\n    @Input() public width: number;\n\n    /**\n     * The canvas height\n     */\n    @Input() public height: number;\n\n    /**\n     * Total amount of angles\n     */\n    @Input() public angles: number;\n\n    /**\n     * Amount of angles per image\n     */\n    @Input() public anglesPerImage: number;\n\n    /**\n     * The initial angle to show (number between 0 and 360)\n     */\n    @Input() public startAngle: number = 0;\n\n    /**\n     * Image set with all (ordered) image urls\n     */\n    @Input() public images: ImageSetInterface = {};\n\n    /**\n     * The factor which increases the drag speed\n     * Default to 5\n     */\n    @Input() public speedFactor: number;\n\n    /**\n     * Array of hotspots\n     */\n    @Input() public hotspots: HotspotInterface[];\n\n    /**\n     * Flag to control if all images should be preloaded\n     */\n    @Input() public preload: boolean = false;\n\n    /**\n     * Gets emitted when the images were preloaded\n     */\n    @Output() public preloaded: EventEmitter<null> = new EventEmitter();\n\n    /**\n     * The canvas element reference\n     */\n    @ViewChild('canvasElement') private canvasElement: ElementRef;\n\n    /**\n     * The three sixty instance\n     */\n    private threeSixty: ThreeSixty;\n\n    /**\n     * @param threeSixtyFactory\n     */\n    public constructor(private threeSixtyFactory: ThreeSixtyFactory) {\n    }\n\n    /**\n     * @inheritDoc\n     */\n    public ngOnInit() {\n        this.threeSixty = this.threeSixtyFactory.create(this.canvasElement.nativeElement, this.getThreeSixtyConfiguration());\n\n        this.threeSixty.initialize(this.images, this.startAngle);\n\n        this.preloadImages();\n    }\n\n    /**\n     * @inheritDoc\n     */\n    public ngOnChanges(changes: SimpleChanges) {\n        if (!this.threeSixty) {\n            return;\n        }\n\n        // Don't update the configuration if only the images have been changed\n        const changedProperties = Object.keys(changes);\n        if (changedProperties.length > 1 || !changes.hasOwnProperty('images')) {\n            this.threeSixty.updateConfiguration(this.getThreeSixtyConfiguration());\n        }\n\n        if (changes.hasOwnProperty('images')) {\n            this.threeSixty.updateImages(this.images);\n            this.preloadImages();\n        }\n    }\n\n    /**\n     * Force a preload of all images\n     */\n    public forcePreload() {\n        this.threeSixty.preload().then(() => this.preloaded.emit());\n    }\n\n    /**\n     * Preload all images if the preload flag is set\n     */\n    private preloadImages() {\n        if (this.preload) {\n            this.threeSixty.preload().then(() => this.preloaded.emit());\n        }\n    }\n\n    /**\n     * Get the configuration object for the ThreeSixty instance\n     */\n    private getThreeSixtyConfiguration(): ConfigurationInterface {\n        const configuration: ConfigurationInterface = {\n            angles: this.angles,\n            anglesPerImage: this.anglesPerImage\n        };\n\n        if (this.speedFactor >= 0) {\n            configuration.speedFactor = this.speedFactor;\n        }\n\n        if (this.hotspots) {\n            configuration.hotspots = this.hotspots;\n        }\n        return configuration;\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { ThreeSixtyComponent } from './three-sixty.component';\nimport { ThreeSixtyFactory } from './three-sixty.factory';\n\n@NgModule({\n    declarations: [ThreeSixtyComponent],\n    providers: [ThreeSixtyFactory],\n    exports: [ThreeSixtyComponent]\n})\nexport class ThreeSixtyModule {\n}\n","/**\n * Angular library starter\n * Build an Angular library compatible with AoT compilation & Tree shaking like an official package\n * Copyright Roberto Simonetti\n * MIT license\n * https://github.com/mediamanDE/angular-three-sixty\n */\n\n/**\n * Entry point for all public APIs of the package.\n */\nexport * from './src/angular-three-sixty';\n\n// This file only reexports content of the `src` folder. Keep it that way.\n"],"names":[],"mappings":"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"}